{%- comment -%}
  Renders an image

  Accepts the following attributes:
  - image {image} - Image object
  - media_crop {'16-9'|'portrait'|'landscape'|'square'} - Crop type of the media
  - preload {Boolean} - Whether to preload the image
{%- endcomment -%}

{% liquid
  assign image = image | default: block.settings.image
  assign media_crop = media_crop | default: block.settings.media_crop | default: 'square'
  assign preload = preload | default: false

  if preload
    assign loading = 'eager'
    assign fetchpriority = 'high'
  else
    assign loading = 'lazy'
    assign fetchpriority = 'auto'
  endif
%}

<div class="block-image aspect-ratio--{{ media_crop }}" {{ block.shopify_attributes }}>
  {%- if image != blank -%}
    {%- liquid
      echo image | image_url: width: 800 | image_tag: loading: loading, fetchpriority: fetchpriority, sizes: sizes
    -%}
  {%- else -%}
    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
  {%- endif -%}
</div>
